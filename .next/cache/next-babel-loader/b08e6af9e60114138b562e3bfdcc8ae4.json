{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime-corejs2/regenerator\";\nimport _JSON$stringify from \"@babel/runtime-corejs2/core-js/json/stringify\";\nimport _toArray from \"@babel/runtime-corejs2/helpers/esm/toArray\";\nimport _classCallCheck from \"@babel/runtime-corejs2/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime-corejs2/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"@babel/runtime-corejs2/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime-corejs2/helpers/esm/getPrototypeOf\";\nimport _inherits from \"@babel/runtime-corejs2/helpers/esm/inherits\";\nimport _defineProperty from \"@babel/runtime-corejs2/helpers/esm/defineProperty\";\nvar __jsx = React.createElement;\nimport React, { Component } from 'react';\nimport Link from 'next/link';\nimport fetch from 'isomorphic-unfetch'; //Components\n// import defaultBcg from '../images/room-1.jpeg'\n\nimport Banner from '../../components/Banner'; //Context\n\nimport { RoomContext, RoomProvider } from '../../context';\nimport StyledHero from '../../components/StyledHero';\nimport Loading from '../../components/Loading'; //SEO\n\nimport Head from 'next/head';\n\nvar room = /*#__PURE__*/function (_Component) {\n  _inherits(room, _Component);\n\n  function room(props) {\n    var _this;\n\n    _classCallCheck(this, room);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(room).call(this, props));\n    _this.state = {\n      slug: _this.props.query.name,\n      room: _this.props.room\n    };\n    return _this;\n  }\n\n  _createClass(room, [{\n    key: \"render\",\n    value: function render() {\n      if (!room) {\n        return __jsx(Loading, null);\n      }\n\n      var _this$state$room = this.state.room,\n          name = _this$state$room.name,\n          description = _this$state$room.description,\n          capacity = _this$state$room.capacity,\n          size = _this$state$room.size,\n          price = _this$state$room.price,\n          extras = _this$state$room.extras,\n          breakfast = _this$state$room.breakfast,\n          pets = _this$state$room.pets,\n          images = _this$state$room.images;\n      var roomimages = images.map(function (image) {\n        return image.url;\n      });\n\n      var _roomimages = _toArray(roomimages),\n          mainImg = _roomimages[0],\n          defaultImg = _roomimages.slice(1);\n\n      return __jsx(React.Fragment, null, __jsx(Head, null, __jsx(\"title\", null, name), __jsx(\"meta\", {\n        name: \"title\",\n        content: name\n      }), __jsx(\"meta\", {\n        name: \"description\",\n        content: description\n      }), __jsx(\"meta\", {\n        property: \"og:description\",\n        content: description\n      }), __jsx(\"meta\", {\n        property: \"og:image\",\n        content: mainImg\n      }), __jsx(\"meta\", {\n        property: \"og:title\",\n        content: name\n      })), __jsx(StyledHero, {\n        img: mainImg\n      }, __jsx(Banner, {\n        title: \"\".concat(name, \" room\")\n      }, __jsx(Link, {\n        href: \"/rooms\"\n      }, __jsx(\"a\", {\n        className: \"btn-primary\"\n      }, \"back to rooms\")))), __jsx(\"section\", {\n        className: \"single-room\"\n      }, __jsx(\"div\", {\n        className: \"single-room-images\"\n      }, defaultImg.map(function (item, index) {\n        return __jsx(\"img\", {\n          key: index,\n          src: item,\n          alt: name\n        });\n      })), __jsx(\"div\", {\n        className: \"single-room-info\"\n      }, __jsx(\"article\", {\n        className: \"description\"\n      }, __jsx(\"h3\", null, \"Details\"), __jsx(\"p\", null, description)), __jsx(\"article\", {\n        className: \"info\"\n      }, __jsx(\"h3\", null, \"Info\"), __jsx(\"h6\", null, \"price: $\", price), __jsx(\"h6\", null, \"size: $\", size, \" sqm\"), __jsx(\"h6\", null, \"max capacity: \", capacity, \" pax\"), __jsx(\"h6\", null, pets ? \"pets allows\" : \"no pets allowed\"), __jsx(\"h6\", null, breakfast && \"free breakfast included\")))), __jsx(\"section\", {\n        className: \"room-extras\"\n      }, __jsx(\"h6\", null, \"extras\"), __jsx(\"ul\", {\n        className: \"extras\"\n      }, extras.map(function (item, index) {\n        return __jsx(\"li\", {\n          key: index\n        }, \"- \", item);\n      }))));\n    }\n  }]);\n\n  return room;\n}(Component);\n\n_defineProperty(room, \"getStaticProps\", function _callee(_ref) {\n  var query, res, data, roomData, room;\n  return _regeneratorRuntime.async(function _callee$(_context) {\n    while (1) {\n      switch (_context.prev = _context.next) {\n        case 0:\n          query = _ref.query;\n          _context.next = 3;\n          return _regeneratorRuntime.awrap(fetch('https://graphql.datocms.com/', {\n            method: \"POST\",\n            body: _JSON$stringify({\n              query: \"{ allRooms {\\n                    id\\n                    name\\n                    slug\\n                    price\\n                    roomtype\\n                    size\\n                    capacity\\n                    breakfast\\n                    pets\\n                    featured\\n                    description\\n                    extras\\n                    images {\\n                      url\\n                    }\\n                  } }\"\n            }),\n            headers: {\n              'Content-Type': 'application/json',\n              'Accept': 'application/json',\n              'Authorization': 'Bearer f3341f2f85860e06446a5e86bfd392'\n            }\n          }));\n\n        case 3:\n          res = _context.sent;\n          _context.next = 6;\n          return _regeneratorRuntime.awrap(res.json());\n\n        case 6:\n          data = _context.sent;\n          roomData = data.data.allRooms;\n          room = roomData.find(function (room) {\n            return room.slug === query.name;\n          });\n          return _context.abrupt(\"return\", {\n            query: query,\n            room: room\n          });\n\n        case 10:\n        case \"end\":\n          return _context.stop();\n      }\n    }\n  });\n});\n\n_defineProperty(room, \"contextType\", RoomContext);\n\nexport default room;","map":null,"metadata":{},"sourceType":"module"}