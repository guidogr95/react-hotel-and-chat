{"ast":null,"code":"import _toArray from \"@babel/runtime-corejs2/helpers/esm/toArray\";\nimport _classCallCheck from \"@babel/runtime-corejs2/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime-corejs2/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"@babel/runtime-corejs2/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime-corejs2/helpers/esm/getPrototypeOf\";\nimport _inherits from \"@babel/runtime-corejs2/helpers/esm/inherits\";\nimport _defineProperty from \"@babel/runtime-corejs2/helpers/esm/defineProperty\";\nimport _regeneratorRuntime from \"@babel/runtime-corejs2/regenerator\";\nimport _JSON$stringify from \"@babel/runtime-corejs2/core-js/json/stringify\";\nvar _jsxFileName = \"/home/guido/Documents/GitHub/react-resort/pages/room/[name].js\";\nvar __jsx = React.createElement;\nimport React, { Component } from 'react';\nimport Link from 'next/link';\nimport { useRouter } from 'next/router';\nimport fetch from 'isomorphic-unfetch'; //Components\n// import defaultBcg from '../images/room-1.jpeg'\n\nimport Banner from '../../components/Banner'; //Context\n\nimport { RoomContext, RoomProvider } from '../../context';\nimport StyledHero from '../../components/StyledHero';\nimport Loading from '../../components/Loading'; //SEO\n\nimport Head from 'next/head';\nexport function getStaticProps(_ref) {\n  var query, res, data, roomData, room, router;\n  return _regeneratorRuntime.async(function getStaticProps$(_context) {\n    while (1) {\n      switch (_context.prev = _context.next) {\n        case 0:\n          query = _ref.query;\n          _context.next = 3;\n          return _regeneratorRuntime.awrap(fetch('https://graphql.datocms.com/', {\n            method: \"POST\",\n            body: _JSON$stringify({\n              query: \"{ allRooms {\\n                id\\n                name\\n                slug\\n                price\\n                roomtype\\n                size\\n                capacity\\n                breakfast\\n                pets\\n                featured\\n                description\\n                extras\\n                images {\\n                    url\\n                }\\n              } }\"\n            }),\n            headers: {\n              'Content-Type': 'application/json',\n              'Accept': 'application/json',\n              'Authorization': 'Bearer f3341f2f85860e06446a5e86bfd392'\n            }\n          }));\n\n        case 3:\n          res = _context.sent;\n          _context.next = 6;\n          return _regeneratorRuntime.awrap(res.json());\n\n        case 6:\n          data = _context.sent;\n          roomData = data.data.allRooms;\n          room = roomData.find(function (room) {\n            return room.slug === query.name;\n          });\n          router = useRouter();\n          console.log(router);\n          return _context.abrupt(\"return\", {\n            props: {\n              router: router,\n              room: room\n            }\n          });\n\n        case 12:\n        case \"end\":\n          return _context.stop();\n      }\n    }\n  });\n}\n\nvar room = /*#__PURE__*/function (_Component) {\n  _inherits(room, _Component);\n\n  function room(props) {\n    var _this;\n\n    _classCallCheck(this, room);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(room).call(this, props));\n    _this.state = {\n      slug: 'single-deluxe',\n      room: _this.props.room\n    };\n    return _this;\n  }\n\n  _createClass(room, [{\n    key: \"render\",\n    value: function render() {\n      if (!room) {\n        return __jsx(Loading, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 63\n          },\n          __self: this\n        });\n      }\n\n      console.log(this);\n      var _this$state$room = this.state.room,\n          name = _this$state$room.name,\n          description = _this$state$room.description,\n          capacity = _this$state$room.capacity,\n          size = _this$state$room.size,\n          price = _this$state$room.price,\n          extras = _this$state$room.extras,\n          breakfast = _this$state$room.breakfast,\n          pets = _this$state$room.pets,\n          images = _this$state$room.images;\n      var roomimages = images.map(function (image) {\n        return image.url;\n      });\n\n      var _roomimages = _toArray(roomimages),\n          mainImg = _roomimages[0],\n          defaultImg = _roomimages.slice(1);\n\n      return __jsx(React.Fragment, null, __jsx(Head, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 71\n        },\n        __self: this\n      }, __jsx(\"title\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 72\n        },\n        __self: this\n      }, name), __jsx(\"meta\", {\n        name: \"title\",\n        content: name,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 73\n        },\n        __self: this\n      }), __jsx(\"meta\", {\n        name: \"description\",\n        content: description,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 74\n        },\n        __self: this\n      }), __jsx(\"meta\", {\n        property: \"og:description\",\n        content: description,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 75\n        },\n        __self: this\n      }), __jsx(\"meta\", {\n        property: \"og:image\",\n        content: mainImg,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 76\n        },\n        __self: this\n      }), __jsx(\"meta\", {\n        property: \"og:title\",\n        content: name,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 77\n        },\n        __self: this\n      })), __jsx(StyledHero, {\n        img: mainImg,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 79\n        },\n        __self: this\n      }, __jsx(Banner, {\n        title: \"\".concat(name, \" room\"),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 80\n        },\n        __self: this\n      }, __jsx(Link, {\n        href: \"/rooms\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 81\n        },\n        __self: this\n      }, __jsx(\"a\", {\n        className: \"btn-primary\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 82\n        },\n        __self: this\n      }, \"back to rooms\")))), __jsx(\"section\", {\n        className: \"single-room\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 86\n        },\n        __self: this\n      }, __jsx(\"div\", {\n        className: \"single-room-images\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 87\n        },\n        __self: this\n      }, defaultImg.map(function (item, index) {\n        return __jsx(\"img\", {\n          key: index,\n          src: item,\n          alt: name,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 89\n          },\n          __self: this\n        });\n      })), __jsx(\"div\", {\n        className: \"single-room-info\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 92\n        },\n        __self: this\n      }, __jsx(\"article\", {\n        className: \"description\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 93\n        },\n        __self: this\n      }, __jsx(\"h3\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 94\n        },\n        __self: this\n      }, \"Details\"), __jsx(\"p\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 95\n        },\n        __self: this\n      }, description)), __jsx(\"article\", {\n        className: \"info\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 97\n        },\n        __self: this\n      }, __jsx(\"h3\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 98\n        },\n        __self: this\n      }, \"Info\"), __jsx(\"h6\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 99\n        },\n        __self: this\n      }, \"price: $\", price), __jsx(\"h6\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 100\n        },\n        __self: this\n      }, \"size: $\", size, \" sqm\"), __jsx(\"h6\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 101\n        },\n        __self: this\n      }, \"max capacity: \", capacity, \" pax\"), __jsx(\"h6\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 102\n        },\n        __self: this\n      }, pets ? \"pets allows\" : \"no pets allowed\"), __jsx(\"h6\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 103\n        },\n        __self: this\n      }, breakfast && \"free breakfast included\")))), __jsx(\"section\", {\n        className: \"room-extras\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 107\n        },\n        __self: this\n      }, __jsx(\"h6\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 108\n        },\n        __self: this\n      }, \"extras\"), __jsx(\"ul\", {\n        className: \"extras\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 109\n        },\n        __self: this\n      }, extras.map(function (item, index) {\n        return __jsx(\"li\", {\n          key: index,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 111\n          },\n          __self: this\n        }, \"- \", item);\n      }))));\n    }\n  }]);\n\n  return room;\n}(Component);\n\n_defineProperty(room, \"contextType\", RoomContext);\n\nexport default room;","map":{"version":3,"sources":["/home/guido/Documents/GitHub/react-resort/pages/room/[name].js"],"names":["React","Component","Link","useRouter","fetch","Banner","RoomContext","RoomProvider","StyledHero","Loading","Head","getStaticProps","query","method","body","headers","res","json","data","roomData","allRooms","room","find","slug","name","router","console","log","props","state","description","capacity","size","price","extras","breakfast","pets","images","roomimages","map","image","url","mainImg","defaultImg","item","index"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\nimport Link from 'next/link'\nimport { useRouter } from 'next/router'\nimport fetch from 'isomorphic-unfetch'\n//Components\n// import defaultBcg from '../images/room-1.jpeg'\nimport Banner from '../../components/Banner'\n//Context\nimport { RoomContext, RoomProvider } from '../../context'\nimport StyledHero from '../../components/StyledHero'\nimport Loading from '../../components/Loading'\n//SEO\nimport Head from 'next/head';\n\nexport async function getStaticProps({query}) {\n    const res = await fetch('https://graphql.datocms.com/',{\n        method: \"POST\",\n        body: JSON.stringify({\n            query: `{ allRooms {\n                id\n                name\n                slug\n                price\n                roomtype\n                size\n                capacity\n                breakfast\n                pets\n                featured\n                description\n                extras\n                images {\n                    url\n                }\n              } }`\n            }),\n            headers: {\n                'Content-Type': 'application/json', 'Accept': 'application/json', 'Authorization': 'Bearer f3341f2f85860e06446a5e86bfd392'\n            }\n        });\n        const data = await res.json();\n        const roomData = data.data.allRooms;\n    const room = roomData.find(room => room.slug === query.name);\n    const router = useRouter()\n    console.log(router)\n    return {props: {router,room}}\n}\n\nclass room extends Component {\n    \n    constructor(props){\n        super(props)\n        this.state={\n            slug: 'single-deluxe',\n            room: this.props.room\n        }\n    }\n    static contextType = RoomContext;\n        \n    render() {\n        \n        if (!room) {\n            return <Loading/>\n        }\n        console.log(this)\n        const { name,description,capacity,size,price,extras,breakfast,pets,images } = this.state.room\n        const roomimages = images.map(image => image.url);\n        const [mainImg,...defaultImg] = roomimages;\n        return (\n            <>\n            <Head>\n                <title>{name}</title>\n                <meta name=\"title\" content={name}/>\n                <meta name=\"description\" content={description}/>\n                <meta property=\"og:description\" content={description}/>\n                <meta property=\"og:image\" content={mainImg}/>\n                <meta property=\"og:title\" content={name}/>\n            </Head>\n            <StyledHero img={mainImg}>\n                <Banner title={`${name} room`}>\n                    <Link href=\"/rooms\">\n                        <a  className=\"btn-primary\">back to rooms</a>\n                    </Link>\n                </Banner>\n            </StyledHero>\n            <section className=\"single-room\">\n                <div className=\"single-room-images\">\n                { defaultImg.map((item,index) => {\n                   return <img key={index} src={item} alt={name}/>\n                }) }\n                </div>\n                <div className=\"single-room-info\">\n                    <article className=\"description\">\n                        <h3>Details</h3>\n                        <p>{description}</p>\n                    </article>\n                    <article className=\"info\">\n                        <h3>Info</h3>\n                        <h6>price: ${price}</h6>\n                        <h6>size: ${size} sqm</h6>\n                        <h6>max capacity: {capacity} pax</h6>\n                        <h6>{pets?\"pets allows\":\"no pets allowed\"}</h6>\n                        <h6>{breakfast && \"free breakfast included\"}</h6>\n                    </article>\n                </div>\n            </section>\n            <section className=\"room-extras\">\n                <h6>extras</h6>\n                <ul className=\"extras\">\n                    {extras.map((item,index) => {\n                        return <li key={index}>- {item}</li>\n                    })}\n                </ul>\n            </section>\n            </>\n        )\n    }\n}\n\nexport default room;"]},"metadata":{},"sourceType":"module"}